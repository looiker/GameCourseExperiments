{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Tower_ALL.js"],"names":["TowerPosNodeStateP","invild","Null","Tower","BuildMenu","UpDateMenu","Tower_ALL","cc","Class","extends","Component","properties","default","type","Node","TowerPrefabs","Prefab","onLoad","ClickBack","node","parent","getChildByName","closeMenu","i","length","getComponent","attack_circle","opacity","state","menu","destroy"],"mappings":";;;;;;AAAA;;;;;;;;;AASA;;;AAGA,IAAMA,qBAAqB;AAC1BC,YAAW,CAAC,CADc;AAE1BC,UAAY,CAFc;AAG1BC,WAAY,CAHc;AAI1BC,eAAY,CAJc;AAK1BC,gBAAY;AALc,CAA3B;;AAQA,IAAIC,YAAYC,GAAGC,KAAH,CAAS;AACrBC,aAASF,GAAGG,SADS;AAErBC,gBAAY;AACRR,eAAM;AACXS,qBAAQ,EADG;AAEXC,kBAAKN,GAAGO;AAFG,SADE;AAKRC,sBAAaR,GAAGS;AALR,KAFS;;AAUrBC,UAVqB,oBAUb;AACJ,aAAKC,SAAL,GAAiB,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,cAAjB,CAAgC,WAAhC,CAAjB;AACH,KAZoB;;;AAcrB;;;AAGAC,eAAU,qBAAU;AAChB;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,KAAKpB,KAAL,CAAWqB,MAA9B,EAAsCD,GAAtC,EAA0C;AACtC;AACA,gBAAIJ,OAAK,KAAKhB,KAAL,CAAWoB,CAAX,CAAT;AACA;AACA,gBAAIpB,QAAMgB,KAAKM,YAAL,CAAkB,OAAlB,CAAV;AACAtB,kBAAMuB,aAAN,CAAoBC,OAApB,GAA8B,CAA9B;AACA;AACA;AACA,gBAAGxB,MAAMyB,KAAN,KAAgB5B,mBAAmBI,SAAtC,EAAgD;AAC5CD,sBAAM0B,IAAN,CAAWC,OAAX;AACA3B,sBAAMyB,KAAN,GAAc5B,mBAAmBE,IAAjC;AACH;AACD;AACA;AACA,gBAAGC,MAAMyB,KAAN,KAAgB5B,mBAAmBK,UAAtC,EAAiD;AAC7CF,sBAAM0B,IAAN,CAAWC,OAAX;AACA3B,sBAAMyB,KAAN,GAAc5B,mBAAmBG,KAAjC;AACH;AACJ;AACJ;;AAED;AAxCqB,CAAT,CAAhB","file":"Tower_ALL.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["/**\r\n * Tower_ALL实现对所有塔的全局调整。\r\n * 实现以下功能：\r\n * <1>销毁场上菜单函数\r\n * 具有以下属性：\r\n * 1、塔节点列表\r\n * 2、塔预制件列表\r\n */\r\n\r\n/**\r\n * 添加状态机\r\n */\r\nconst TowerPosNodeStateP = {\r\n\tinvild:    -1,\r\n\tNull:       1,\r\n\tTower:      2,\r\n\tBuildMenu:  3,\r\n\tUpDateMenu: 4\r\n}\r\n\r\nvar Tower_ALL = cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        Tower:{\r\n\t\t\tdefault:[],\r\n\t\t\ttype:cc.Node\r\n        },\r\n        TowerPrefabs:cc.Prefab,\r\n    },\r\n\r\n    onLoad(){\r\n        this.ClickBack = this.node.parent.getChildByName(\"ClickBack\");\r\n    },\r\n\r\n    /**\r\n     * 销毁场上菜单\r\n     */\r\n    closeMenu:function(){\r\n        //提取列表\r\n        for(let i = 0; i < this.Tower.length; i++){\r\n            //提取节点\r\n            let node=this.Tower[i];\r\n            //提取塔对象实例\r\n            let Tower=node.getComponent(\"Tower\");\r\n            Tower.attack_circle.opacity = 0;\r\n            //如果塔处于 未建塔&有菜单  BuildMenu  3 状态\r\n            //则销毁菜单后，设置塔状态为 未建塔&无菜单 Null 1\r\n            if(Tower.state === TowerPosNodeStateP.BuildMenu){\r\n                Tower.menu.destroy();\r\n                Tower.state = TowerPosNodeStateP.Null;\r\n            }\r\n            //如果塔处于 已建塔&有菜单  UpdateMenu  4 状态\r\n            //则销毁菜单后，设置塔状态为 已建塔&无菜单 Tower 2\r\n            if(Tower.state === TowerPosNodeStateP.UpDateMenu){\r\n                Tower.menu.destroy();\r\n                Tower.state = TowerPosNodeStateP.Tower;\r\n            }\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});"]}