{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Tower.js"],"names":["Tower","cc","Class","extends","Component","properties","constructed","attack_circle","Node","menu","archer","caster","gunturret","UpDate","sale","SizeOfAttack","RadiusOfAttack","onLoad","width","RetractMenu","On_TB_clicked","IfPause","flag","CheckOtherTower","opacity","children","getComponent","Button","interactable","ClickBackOtherTower","SettingInteractableFalse","On_archer_clicked","realUrl","url","raw","temp","node","getChildByName","temp_Sprite","SpriteFrame","normalSprite","pressedSprite","hoverSprite","scale","On_caster_clicked","On_gunturret_clicked","On_sale_clicked","level","parent","pauseframe","tower_all","TargetTower","i","length"],"mappings":"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","file":"Tower.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var Tower=cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\tconstructed:false,\r\n\t\tattack_circle:cc.Node,\r\n\t\tmenu:cc.Node,\r\n\t\tarcher:cc.Node,\r\n\t\tcaster:cc.Node,\r\n\t\tgunturret:cc.Node,\r\n\t\tUpDate:cc.Node,\r\n\t\tsale:cc.Node,\r\n\t\tSizeOfAttack:1.0,\r\n\t\tRadiusOfAttack:320\r\n    },\r\n\r\n    onLoad () {\r\n\t\t//初始化塔数据\r\n\t\tthis.constructed=false;\r\n\t\tthis.RadiusOfAttack=this.attack_circle.width/2;\r\n\t\tthis.RetractMenu();\r\n\t},\r\n\r\n    /*点击塔基*/\r\n    On_TB_clicked:function(){\r\n\t\t//如果游戏未暂停\r\n        if (this.IfPause() == false) {\r\n\t\t\t//检查是否有其他塔菜单显示\r\n\t\t\tlet flag=this.CheckOtherTower();\r\n\t\t\t//未建塔，且未显示菜单。则显示箭塔、法塔、炮塔\r\n\t\t\tif(this.constructed==false&&this.menu.opacity==0){\r\n\t\t\t\tthis.menu.opacity=255;\r\n\t\t\t\tthis.archer.opacity=255;\r\n\t\t\t\tthis.archer.children[0].getComponent(cc.Button).interactable=true;\r\n\t\t\t\tthis.caster.opacity=255;\r\n\t\t\t\tthis.caster.children[0].getComponent(cc.Button).interactable=true;\r\n\t\t\t\tthis.gunturret.opacity=255;\r\n\t\t\t\tthis.gunturret.children[0].getComponent(cc.Button).interactable=true;\r\n\t\t\t\tthis.UpDate.opacity=0;\r\n\t\t\t\tthis.sale.opacity=0;\r\n\t\t\t}\r\n\t\t\t//已建塔，且未显示菜单。则显示升级、售卖、攻击圈\r\n\t\t\telse if(this.constructed==true&&this.menu.opacity==0){\r\n\t\t\t\tthis.menu.opacity=255;\r\n\t\t\t\tthis.archer.opacity=0;\r\n\t\t\t\tthis.caster.opacity=0;\r\n\t\t\t\tthis.gunturret.opacity=0;\r\n\t\t\t\tthis.UpDate.opacity=255;\r\n\t\t\t\tthis.UpDate.children[0].getComponent(cc.Button).interactable=true;\r\n\t\t\t\tthis.sale.opacity=255;\r\n\t\t\t\tthis.sale.children[0].getComponent(cc.Button).interactable=true;\r\n\t\t\t\tthis.attack_circle.opacity=255;\r\n\t\t\t}\r\n\t\t\t//未建塔，且已显示菜单。则隐藏箭塔、法塔、炮塔\r\n\t\t\telse if(this.constructed==false&&this.menu.opacity==255){\r\n\t\t\t\tthis.RetractMenu();\r\n\t\t\t}\r\n\t\t\t//已建塔，且已显示菜单。则隐藏升级、售卖、攻击圈\r\n\t\t\telse if(this.constructed==true&&this.menu.opacity==255){\r\n\t\t\t\tthis.RetractMenu();\r\n\t\t\t}\r\n\t\t\t//若有其他塔菜单，则隐藏其菜单\r\n\t\t\tthis.ClickBackOtherTower(flag);\r\n\t\t}\r\n\t    //如果游戏暂停，禁用塔按钮\r\n\t\telse{\r\n            this.SettingInteractableFalse();\r\n\t\t}\r\n\t},\r\n\t\r\n\t/*点击箭塔*/\r\n    On_archer_clicked: function () {\r\n        //如果游戏未暂停\r\n\t    if (this.IfPause() == false) {\r\n\t        this.constructed = true;\r\n\t        this.RetractMenu();\r\n\t        //更换箭塔立绘\r\n\t        var realUrl = cc.url.raw('texture/Tower/archer.png');\r\n\t        var temp = this.node.getChildByName(\"Towerbasic_button\").getComponent(cc.Button);\r\n\t        var temp_Sprite = new cc.SpriteFrame(realUrl);\r\n\t        temp.normalSprite = temp_Sprite;\r\n\t        temp.pressedSprite = temp_Sprite;\r\n\t        temp.hoverSprite = temp_Sprite;\r\n\t        //this.node.getChildByName(\"Towerbasic_button\").getComponent(cc.Sprite).spriteFrame.setTexture(texture);\r\n\t        //修改塔攻击范围\r\n\t        this.SizeOfAttack = 1.5;\r\n\t        this.RadiusOfAttack = this.SizeOfAttack * this.RadiusOfAttack\r\n\t        //更改攻击圈图片大小\r\n\t        this.node.getChildByName(\"attack_circle_standard\").getChildByName(\"attack_circle_sprite\").scale = this.SizeOfAttack;\r\n\t    }\r\n\t    //如果游戏暂停，禁用塔按钮\r\n\t    else {\r\n\t        this.SettingInteractableFalse();\r\n\t    }\r\n\t},\r\n\t\r\n\t/*点击魔法塔*/\r\n    On_caster_clicked: function () {\r\n        //如果游戏未暂停\r\n        if (this.IfPause() == false) {\r\n            this.constructed = true;\r\n            this.RetractMenu();\r\n            //更换魔法塔立绘\r\n            var realUrl = cc.url.raw('texture/Tower/caster.png');\r\n            var temp = this.node.getChildByName(\"Towerbasic_button\").getComponent(cc.Button);\r\n            var temp_Sprite = new cc.SpriteFrame(realUrl);\r\n            temp.normalSprite = temp_Sprite;\r\n            temp.pressedSprite = temp_Sprite;\r\n            temp.hoverSprite = temp_Sprite;\r\n            //修改塔攻击范围\r\n            this.SizeOfAttack = 1.2;\r\n            this.RadiusOfAttack = this.SizeOfAttack * this.RadiusOfAttack\r\n            //更改攻击圈图片大小\r\n            this.node.getChildByName(\"attack_circle_standard\").getChildByName(\"attack_circle_sprite\").scale = this.SizeOfAttack;\r\n        }\r\n        //如果游戏暂停，禁用塔按钮\r\n        else {\r\n            this.SettingInteractableFalse();\r\n        }\r\n\t},\r\n\t\r\n\t/*点击炮塔*/\r\n    On_gunturret_clicked: function () {\r\n        //如果游戏未暂停\r\n        if (this.IfPause() == false) {\r\n            this.constructed = true;\r\n            this.RetractMenu();\r\n            //更换炮塔立绘\r\n            var realUrl = cc.url.raw('texture/Tower/gunturret.png');\r\n            var temp = this.node.getChildByName(\"Towerbasic_button\").getComponent(cc.Button);\r\n            var temp_Sprite = new cc.SpriteFrame(realUrl);\r\n            temp.normalSprite = temp_Sprite;\r\n            temp.pressedSprite = temp_Sprite;\r\n            temp.hoverSprite = temp_Sprite;\r\n            //修改塔攻击范围\r\n            this.SizeOfAttack = 1;\r\n            this.RadiusOfAttack = this.SizeOfAttack * this.RadiusOfAttack\r\n            //更改攻击圈图片大小\r\n            this.node.getChildByName(\"attack_circle_standard\").getChildByName(\"attack_circle_sprite\").scale = this.SizeOfAttack;\r\n        }\r\n        //如果游戏暂停，禁用塔按钮\r\n        else {\r\n            this.SettingInteractableFalse();\r\n        }\r\n\t},\r\n    \r\n\t/*点击售卖*/\r\n    On_sale_clicked: function () {\r\n        //如果游戏未暂停\r\n        if (this.IfPause() == false) {\r\n            this.constructed = false;\r\n            //更新塔基立绘\r\n            var realUrl = cc.url.raw('texture/Tower/Tower_4.png');\r\n            var temp = this.node.getChildByName(\"Towerbasic_button\").getComponent(cc.Button);\r\n            var temp_Sprite = new cc.SpriteFrame(realUrl);\r\n            temp.normalSprite = temp_Sprite;\r\n            temp.pressedSprite = temp_Sprite;\r\n\r\n            realUrl = cc.url.raw('texture/Tower/Tower_3.png');\r\n            temp_Sprite = new cc.SpriteFrame(realUrl);\r\n            temp.hoverSprite = temp_Sprite;\r\n            //重置攻击范围\r\n            this.SizeOfAttack = 1;\r\n            this.RadiusOfAttack = this.attack_circle.width / 2;\r\n            //修改并隐藏攻击圈\r\n            this.node.getChildByName(\"attack_circle_standard\").getChildByName(\"attack_circle_sprite\").scale = this.SizeOfAttack;\r\n            this.RetractMenu();\r\n        }\r\n        //如果游戏暂停，禁用塔按钮\r\n        else {\r\n            this.SettingInteractableFalse();\r\n        }\r\n\t},\r\n\t\r\n\t/*收回菜单*/\r\n\tRetractMenu:function(){\r\n\t\t//隐藏塔菜单、攻击圈\r\n\t\tthis.menu.opacity=0;\r\n\t\tthis.attack_circle.opacity=0;\r\n        //禁用塔按钮\r\n\t\tthis.SettingInteractableFalse();\r\n\t},\r\n\t\r\n\t/*判断是否暂停*/\r\n\tIfPause:function(){\r\n\t    var level = this.node.parent.parent.children[3];\r\n\t\tvar pauseframe=level.children[4];\r\n\t\tif(pauseframe.opacity!=0)\r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\r\n\t},\r\n\r\n    /*禁用塔按钮*/\r\n    SettingInteractableFalse:function(){\r\n        this.archer.children[0].getComponent(cc.Button).interactable = false;\r\n        this.caster.children[0].getComponent(cc.Button).interactable = false;\r\n        this.gunturret.children[0].getComponent(cc.Button).interactable = false;\r\n        this.UpDate.children[0].getComponent(cc.Button).interactable = false;\r\n        this.sale.children[0].getComponent(cc.Button).interactable = false;\r\n\t},\r\n\t\r\n\t/*收回其他塔的菜单*/\r\n\tClickBackOtherTower:function(flag){\r\n\t\tlet tower_all=this.node.parent;\r\n\t\tif(flag!=0){\r\n\t\t\tflag-=1;\r\n\t\t\tlet TargetTower=tower_all.children[flag];\r\n\t\t\tlet attack_circle=TargetTower.children[0];\r\n\t\t\tlet menu=TargetTower.children[2];\r\n\t\t\tattack_circle.opacity=0;\r\n\t\t\t\tmenu.opacity=0;\r\n\t\t\t\t//禁用塔按钮\r\n\t\t\t\tfor(let i=1;i<6;i++)\r\n\t\t\t\t\tmenu.children[i].children[0].getComponent(cc.Button).interactable=false;\r\n\t\t}\r\n\t},\r\n\r\n\t/*判断是否有其他塔显示菜单,返回值为第i+1个塔，返回0表示无塔显示菜单*/\r\n\tCheckOtherTower:function(){\r\n\t\tlet tower_all=this.node.parent;\r\n\t\tfor(let i=0;i<tower_all.children.length;i++){\r\n\t\t\tif(tower_all.children[i].children[2].opacity!=0)\r\n\t\t\treturn i+1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n});\r\n\r\nexport default Tower;\r\n"]}